<!-- <div class="col-lg-12 col-md-12 col-sm-12">
  <div class="col-lg-12 col-md-12 col-sm-12">
    <mat-icon (click)="toggleTheme()" title="Change theme">format_color_fill</mat-icon>
    <form [formGroup]="userGroupConfigurationTable">
      <table class="table table-responsive-sm table-bordered table-striped table-sm"  [ngClass]="{'table-dark': mode}">
        <thead class="text-nowrap" style="text-align: center;">
          <th>Mã nhóm <span class="ui-column-resizer" dragableColumn> </span></th>
          <th>Tên nhóm<span class="ui-column-resizer" dragableColumn> </span></th>
          <th>Khối<span class="ui-column-resizer" dragableColumn> </span></th>
          <th>Lớp<span class="ui-column-resizer" dragableColumn> </span></th>
          <th>Ghi chú<span class="ui-column-resizer" dragableColumn> </span></th>
          <th>Trạng thái<span class="ui-column-resizer" dragableColumn> </span></th>
          <th>Hoạt động</th>
        </thead>
        <tbody>
          <ng-container formArrayName="tableRows" *ngFor="let group of getFormControls.controls ; let i=index">
            <tr *ngIf="group.get('isEditable').value" [formGroupName]="i">
              <td style="vertical-align: inherit;">
                <div class="col-md-12">
                  <input class="form-control" id="text-input" formControlName="code" type="text" name="text-input" placeholder="Mã nhóm">
                </div>
              </td>
              <td style="vertical-align: inherit;">
                <div class="col-md-12">
                  <input class="form-control" id="text-input" formControlName="name" type="text" name="text-input" placeholder="Tên nhóm">
                </div>
              </td>
              <td style="vertical-align: inherit;">
                <div class="col-md-12">
                  <select class="form-control" formControlName="grade_name">
                    <option disabled>Khối</option>
                    <option>Tất cả</option>
                    <option *ngFor="let listKhoi of dmKhoiData">{{ listKhoi.name }}</option>
                  </select>
                </div>
              </td>
              <td style="vertical-align: inherit;">
                <div class="col-md-12">
                  <select class="form-control" formControlName="class_name">
                    <option disabled>Lớp</option>
                    <option>Tất cả</option>
                    <option *ngFor="let listLop of dmLopData">{{ listLop.name }}</option>
                  </select>
                </div>
              </td>
              <td style="vertical-align: inherit;">
                <div class="col-md-12">
                    <textarea cols="30" rows="3" class="form-control" formControlName="description" placeholder="Ghi chú"></textarea>
                </div>
              </td>
              <td style="vertical-align: inherit; text-align: center;">
                <div class="col-md-12">
                    <label class="checkbox">
                      <input type="checkbox" formControlName="status" />
                      <span class="default"></span>
                  </label>
                </div>
              </td>
              <td style="text-align: center; vertical-align: inherit;">
                <mat-icon class="delete" (click)="deleteRow(i)">delete_forever</mat-icon>
                <mat-icon class="done" (click)="doneRow(group)">done</mat-icon>
              </td>
            </tr>
            <tr *ngIf="!group.get('isEditable').value" >
              <td>
                {{group.get('code').value}}
              </td>
              <td>
                {{group.get('name').value}}
              </td>
              <td>
                  {{group.get('grade_name').value}}
              </td>
              <td>
                  {{group.get('class_name').value}}
              </td>
              <td>
                {{group.get('description').value}}
              </td>
              <td>
                {{group.get('status').value}}
              </td>
              <td style="text-align: center; vertical-align: inherit;">
                <mat-icon class="edit" style="color: darkblue;" (click)="editRow(group)">edit</mat-icon>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
      <div class="action-container">
        <button mat-raised-button type="submit" (click)="addRow()">Add row</button>
        <button mat-raised-button [disabled]="userGroupConfigurationTable.invalid" type="submit" (click)="submitForm()">Submit</button>
      </div>
    </form>
    <div class="output">
      <p>Form Data:  {{userGroupConfigurationTable.value | json}}</p>
        <p>Is Valid: {{userGroupConfigurationTable.valid}}</p>
    </div>
  </div>
</div> -->

<!-- <form [formGroup]="userGroupConfigurationTable"> -->
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <div class="form-group ">
            <div class="row">
              <div class="col-md-6">
                <span class="fa-passwd-reset fa-stack">
                  <i class="fa fa-cog fa-stack-2x"></i>
                  <i class="fa fa-user-o fa-stack-1x"></i>
                </span>
                <strong>Cấu hình nhóm người sử dụng</strong>
              </div>
              <div class="col-md-6" style="text-align: end; padding: 0 3% 0 25%;">
                <div class="form-group has-search" style="margin-bottom: -13px !important; margin-top: 6px;">
                  <span class="fa fa-search form-control-feedback"></span>
                  <input type="text" class="form-control" placeholder="Mã nhóm / Tên nhóm ">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card-body">
          <div class="form-group ">
            <div class="row" style="padding:15px">
              <!-- <div class="col-md-12"> -->
              <div class="col-md-4">
                <div class="col-md-12">
                  <div class="col-md-1 " style="float: left; padding: 2% 0 0 0">
                    <label for="">Khối</label>
                  </div>
                  <div class="col-md-11" style="float: left;">
                    <select class="form-control">
                      <option>Tất cả</option>
                      <option *ngFor="let listKhoi of dmKhoiData" id="{{ listKhoi.id }}">{{ listKhoi.name }}</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="col-md-12">
                  <div class="col-md-1" style="float: left; padding: 2% 0 0 0;">
                    <label for="">Lớp</label>
                  </div>
                  <div class="col-md-11" style="float: left; ">
                    <select class="form-control">
                      <option>Tất cả</option>
                      <option *ngFor="let listLop of dmLopData" multiselect id="{{ listLop.id }}">{{ listLop.name }}
                      </option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="col-md-2">
                <div class="form-check" style="float: right; padding: 3% 0 0 0;">
                  <label class="container">
                    <input type="checkbox" checked="checked">
                    <span class="checkmark"></span>Hoạt động
                  </label>
                </div>
              </div>
              <div class="col-md-2">
                <div class="col-md-12">
                  <button type="button" class="btn btn-primary" data-toggle="button" aria-pressed="false"
                    style="float: right;" autocomplete="off">
                    <i class="fa fa-filter" aria-hidden="true"></i> Lọc dữ liệu
                  </button>
                </div>
              </div>
              <!-- </div> -->
            </div>
            <div class="row"><!-- Thêm mới -->
              <div class="col-md-12">
                <button class="btn btn-success" data-toggle="modal" data-target="#addUserGroupConfigurationModal"
                  (click)="resetUserGroupConfigForm()" style="float: right;margin-bottom: 10px; margin-right: 30px;">
                  <i class="fa fa-plus" aria-hidden="true"></i> Thêm mới
                </button>
              </div>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12">
              <div class="col-lg-12 col-md-12 col-sm-12">
                <table class="table table-responsive-sm table-bordered table-striped table-sm"
                  style="text-align: center;">
                  <thead>
                    <tr>
                      <th style="width: 10%">Mã nhóm</th>
                      <th style="width: 20%">Tên nhóm</th>
                      <th style="width: 12%">Khối</th>
                      <th style="width: 15%">Lớp</th>
                      <th style="width: 20%">Ghi chú</th>
                      <th style="width: 8%">Trạng thái</th>
                      <th>Hoạt động</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of userConfigData | paginate: { itemsPerPage: 10, currentPage: p }">
                      <th style="vertical-align: inherit;">{{ item.code }}</th>
                      <td style="vertical-align: inherit;">{{ item.name }}</td>
                      <td style="vertical-align: inherit;">{{ item.grade_name }}</td>
                      <th style="vertical-align: inherit;">{{ item.class_name }}</th>
                      <td style="vertical-align: inherit;">{{ item.description }}</td>
                      <td>
                        <ng-template [ngIf]="item.status == 0" [ngIfElse]="notEqual">
                          <input ng-if="item.status == 0" type="checkbox" name="status" />
                        </ng-template>
                        <ng-template #notEqual>
                          <input ng-if="item.status == 0" type="checkbox" name="status" checked />
                        </ng-template>
                      </td>
                      <td>
                        <div class="col-md-12">
                          <div class="col-md-6" style="float: left;">
                            <button type="button" style="float: left;" class="btn btn-primary" data-toggle="modal"
                              data-target="#editUserGroupConfigurationModal" (click)="getByIdUserGroupConfig(item.id)">
                              Sửa
                            </button>
                          </div>
                          <div class="col-md-6" style="float: left;">
                            <button class="btn btn-danger" (click)="deleteUserGroupConfig(item.id)">
                              Xóa
                            </button>
                          </div>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <div class="row text-right">
                  <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="col-lg-10 col-md-10 col-sm-10 text-right" style="float: left;padding: 1% 0 0 0;">
                      <pagination-controls (pageChange)="p = $event"></pagination-controls>
                    </div>
                    <div class="col-lg-1 col-md-1 col-sm-1 text-left" style="float: left;padding: 1% 0 0 2%;">
                      <span for="" class="text-right">Hiển thị </span>
                    </div>
                    <div class="col-lg-1 col-md-1 col-sm-1 text-right" style="float: left;">
                      <select class="form-control" (change)="perPageSelected($event.target.value)">
                        <option value="5">5</option>
                        <option value="10">10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- <form formGroup="userGroupConfigurationTable"> -->
            <div class="modal fade" id="addUserGroupConfigurationModal" tabindex="-1" role="dialog"
              aria-labelledby="userGroupConfigModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="userGroupConfigModalLabel">Thêm mới</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <div class="form-group">
                        <label for="code">Mã nhóm</label>
                        <input class="form-control" type="text" name="text-input" formControlName="code"
                          placeholder="Vui lòng nhập mã nhóm"></div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <div class="form-group">
                        <label for="name">Tên nhóm</label>
                        <input class="form-control" type="text" formControlName="name" name="text-input"
                          placeholder="Vui lòng nhập tên nhóm"></div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <div class="form-group">
                        <label for="grade">Khối</label>
                        <select class="form-control" (change)="gradeIdSelected($event.target.value)"
                          formControlName="grade_id">
                          <option disabled>Khối</option>
                          <option value="0">Tất cả</option>
                          <option *ngFor="let listKhoi of dmKhoiData" [value]="listKhoi.id">{{ listKhoi.name }}</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <div class="form-group">
                        <label for="class">Lớp</label>
                        <select class="form-control" (change)="classIdSelected($event.target.value)"
                          formControlName="class_id">
                          <option disabled>Lớp</option>
                          <option value="0">Tất cả</option>
                          <option *ngFor="let listLop of dmLopData" [value]="listLop.id">{{ listLop.name }}</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <div class="form-group">
                        <label for="grade">Ghi chú</label>
                        <textarea cols="50" rows="5" class="form-control" formControlName="description"
                          placeholder="Ghi chú"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Thoát</button>
                    <button type="button" class="btn btn-primary" (click)="addUserGroupConfig()">Cập nhật</button>
                  </div>
                </div>
              </div>
            </div>
            <!-- </form> -->
            <div class="modal fade" id="editUserGroupConfigurationModal" *ngIf="userConfigGetById;" tabindex="-1"
              role="dialog" aria-labelledby="userGroupConfigModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="userGroupConfigModalLabel">Cập nhật</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <div class="form-group" *ngIf="userConfigGetById">
                        <label for="code">Mã nhóm</label>
                        <input class="form-control" formControlName="code" type="text" name="text-input"
                          placeholder="Vui lòng nhập mã nhóm"></div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <div class="form-group">
                        <label for="name">Tên nhóm</label>
                        <input class="form-control" formControlName="name" type="text" name="text-input"
                          placeholder="Vui lòng nhập tên nhóm"></div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <div class="form-group">
                        <label for="grade">Khối</label>
                        <select class="form-control" (change)="gradeIdSelected($event.target.value)"
                          formControlName="grade_id">
                          <option disabled>Khối</option>
                          <option value="0">Tất cả</option>
                          <option *ngFor="let listKhoi of dmKhoiData" [value]="listKhoi.id">{{ listKhoi.name }}</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <div class="form-group">
                        <label for="class">Khối</label>
                        <select class="form-control" (change)="classIdSelected($event.target.value)"
                          formControlName="class_id">
                          <option disabled>Lớp</option>
                          <option value="0">Tất cả</option>
                          <option *ngFor="let listLop of dmLopData" [value]="listLop.id">{{ listLop.name }}</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <div class="form-group">
                        <label for="grade">Ghi chú</label>
                        <textarea cols="50" rows="5" class="form-control" formControlName="description"
                          placeholder="Ghi chú"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Thoát</button>
                    <button type="button" class="btn btn-primary"
                      (click)="updateUserGroupConfig(userConfigGetById.id)">Cập nhật</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <form action="" method="POST" enctype="multipart/form-data">
              <section class="section-preview">
                <div class="col-md-12">
                  <div class="col-lg-3 col-md-3 col-sm-3" style="float: left; ">
                    <button class="btn btn-primary" (click)="downloadSampleFile()">
                      <i class="icon-user icon-white"></i> Tải file mẫu
                    </button>
                  </div>
                  <div class="col-lg-3 col-md-3 col-sm-3" style="float: left; ">
                    <button class="btn btn-primary" (click)="exportFile();">
                      <i class="icon-user icon-white"></i> Xuất ra tệp
                    </button>
                  </div>
                  <div class="col-lg-2 col-md-2 col-sm-2" style="float: left;">
                    <button id="btnImport" class="btn btn-primary" (click)="importFile();">
                      <i class="icon-user icon-white"></i> Nhập từ tệp
                    </button>
                  </div>
                  <div class="col-lg-4 col-md-4 col-sm-4" style="float: left;">
                    <input class="form-control" type="file" #fileInput name="import_excel"
                      accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" />
                  </div>
                </div>
              </section>
            </form>
          </div>

        </div>
      </div>
    </div>
  </form>
